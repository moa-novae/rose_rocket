{"ast":null,"code":"import { useState } from \"react\";\n/*\n  I couldn't find a good library that implements time on \n  a 24 h / 7 day / 52 week discrete timescale. Popular libraries \n  like MomentJS are implemented in real world timescales. \n  For simplicity sake, I ended up just writing the way the \n  time works myself.\n */\n\nexport default function useCalendar() {\n  /* Time 0 is set set arbitrarily to some point in the spacetime\n  Each increment of 1 represents the passing of one hour\n  Not sure if this is the best way to keep track of time\n  Can switch to momentJS in the future\n  No use for time state right now since not using real world time\n  */\n  // const [time, setTime] = useState(0);\n  // weeks starts incrementing at 0\n  const [calendarTime, setCalendarTime] = useState(0); // state responsible for controlled input of calendar header weeks\n\n  const [weekInput, setWeekInput] = useState(calendarTime);\n  const timeRatio = {\n    hour: 1,\n    day: 24,\n    week: 168,\n    year: 8736\n  };\n\n  const convertTime = function (time, from, to) {\n    return time * (timeRatio[from] / timeRatio[to]);\n  }; // number of week into the year\n\n\n  const week = convertTime(calendarTime % timeRatio.year, \"hour\", \"week\");\n\n  const changeWeekBy = n => {\n    setCalendarTime(prev => {\n      const newWeek = prev + n * timeRatio.week; // Don't allow negative weeks\n\n      return newWeek >= 0 ? newWeek : prev;\n    });\n  };\n\n  const findDayAndHourFromTime = function (time) {\n    const day = Math.floor(time % timeRatio.week / timeRatio.day);\n    const hour = time % timeRatio.day;\n    return {\n      day,\n      hour\n    };\n  }; // handles controlled input of calendar header\n\n\n  const handleOnChange = function (e) {\n    const newValue = e.target.value.trim(); // number must be between 0-51 included\n\n    console.log(weekInput);\n    const re = /^[0-9\\b]+$/;\n    setWeekInput(prev => {\n      if (re.test(newValue) || newValue === \"\") {\n        return newValue;\n      } else {\n        return prev;\n      }\n    });\n  };\n\n  let weeklyTasks = [];\n\n  if (week === 0) {\n    //api response placeholder\n    weeklyTasks = [{\n      name: \"task1\",\n      detail: \"very cool\",\n      time: 100\n    }]; //transform data to indicate day and time\n\n    weeklyTasks = weeklyTasks.map(task => ({ ...task,\n      time: findDayAndHourFromTime(task.time)\n    }));\n  }\n\n  if (week === 1) {\n    weeklyTasks = [{\n      name: \"task2\",\n      detail: \"super cool\",\n      time: 200\n    }];\n    weeklyTasks = weeklyTasks.map(task => ({ ...task,\n      time: findDayAndHourFromTime(task.time)\n    }));\n  }\n\n  return {\n    changeWeekBy,\n    week,\n    weeklyTasks,\n    weekInput,\n    handleOnChange\n  };\n}","map":{"version":3,"sources":["/home/momo/portfolio/roseRocket/client/src/components/Calendar/useCalendar.js"],"names":["useState","useCalendar","calendarTime","setCalendarTime","weekInput","setWeekInput","timeRatio","hour","day","week","year","convertTime","time","from","to","changeWeekBy","n","prev","newWeek","findDayAndHourFromTime","Math","floor","handleOnChange","e","newValue","target","value","trim","console","log","re","test","weeklyTasks","name","detail","map","task"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\n\n/*\n  I couldn't find a good library that implements time on \n  a 24 h / 7 day / 52 week discrete timescale. Popular libraries \n  like MomentJS are implemented in real world timescales. \n  For simplicity sake, I ended up just writing the way the \n  time works myself.\n */\nexport default function useCalendar() {\n  /* Time 0 is set set arbitrarily to some point in the spacetime\n  Each increment of 1 represents the passing of one hour\n  Not sure if this is the best way to keep track of time\n  Can switch to momentJS in the future\n  No use for time state right now since not using real world time\n  */\n  // const [time, setTime] = useState(0);\n  // weeks starts incrementing at 0\n  const [calendarTime, setCalendarTime] = useState(0);\n  // state responsible for controlled input of calendar header weeks\n  const [weekInput, setWeekInput] = useState(calendarTime);\n  const timeRatio = {\n    hour: 1,\n    day: 24,\n    week: 168,\n    year: 8736,\n  };\n\n  const convertTime = function (time, from, to) {\n    return time * (timeRatio[from] / timeRatio[to]);\n  };\n  // number of week into the year\n  const week = convertTime(calendarTime % timeRatio.year, \"hour\", \"week\");\n\n  const changeWeekBy = (n) => {\n    setCalendarTime((prev) => {\n      const newWeek = prev + n * timeRatio.week;\n      // Don't allow negative weeks\n      return newWeek >= 0 ? newWeek : prev;\n    });\n  };\n\n  const findDayAndHourFromTime = function (time) {\n    const day = Math.floor((time % timeRatio.week) / timeRatio.day);\n    const hour = time % timeRatio.day;\n    return { day, hour };\n  };\n\n  // handles controlled input of calendar header\n  const handleOnChange = function (e) {\n    const newValue = e.target.value.trim();\n    // number must be between 0-51 included\n    console.log(weekInput);\n    const re = /^[0-9\\b]+$/;\n    setWeekInput((prev) => {\n      if (re.test(newValue) || newValue === \"\") {\n        return newValue;\n      } else {\n        return prev;\n      }\n    });\n  };\n\n  let weeklyTasks = [];\n  if (week === 0) {\n    //api response placeholder\n    weeklyTasks = [{ name: \"task1\", detail: \"very cool\", time: 100 }];\n    //transform data to indicate day and time\n    weeklyTasks = weeklyTasks.map((task) => ({\n      ...task,\n      time: findDayAndHourFromTime(task.time),\n    }));\n  }\n  if (week === 1) {\n    weeklyTasks = [{ name: \"task2\", detail: \"super cool\", time: 200 }];\n    weeklyTasks = weeklyTasks.map((task) => ({\n      ...task,\n      time: findDayAndHourFromTime(task.time),\n    }));\n  }\n  return {\n    changeWeekBy,\n    week,\n    weeklyTasks,\n    weekInput,\n    handleOnChange,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}